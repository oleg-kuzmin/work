# Начало работы с Redux Toolkit

## Цель

Пакет **Redux Toolkit** предназначен для стандартного способа написания логики `Redux`. Первоначально он был создан, чтобы помочь решить три распространенные проблемы, связанные с Redux:

- "Настройка хранилища Redux слишком сложна"
- "Мне нужно добавить много пакетов, чтобы Redux мог делать что-нибудь полезное"
- "Redux требует слишком много шаблонного (повторяющегося) кода"

Мы не можем решить каждый кейс, но в духе `create-react-app` мы можем попытаться предоставить некоторые инструменты для большей абстракции и для обработки наиболее распространенных вариантов использования, а также включить некоторые полезные утилиты, которые позволят упростить код своего приложения.

Redux Toolkit также включает в себя мощную функцию получения и кэширования данных, которую мы назвали `RTK Query`. Он входит в комплект поставки как отдельный набор точек входа. Это необязательный инструмент, но он может устранить необходимость самостоятельно писать логику получения данных.

**Эти инструменты должны быть полезны всем пользователям Redux.** Независимо от того, являетесь ли вы новым пользователем Redux, настраивающим свой первый проект, или опытным пользователем, желающим упростить существующее приложение, **Redux Toolkit** поможет вам улучшить ваш код Redux.

## Установка

### Create a React Redux App

Рекомендуемый способ запуска новых приложений с помощью React и Redux Toolkit — использовать наш [официальный шаблон Redux Toolkit + TS для Vite](https://github.com/reduxjs/redux-templates) или создать новый проект с использованием [шаблона Next с Redux](https://github.com/vercel/next.js/tree/canary/examples/with-redux).

Оба из них уже имеют Redux Toolkit и React-Redux, настроенные соответствующим образом для этого инструмента сборки, и поставляются с небольшим примером приложения, которое демонстрирует, как использовать некоторые функции Redux Toolkit.

```bash
# Vite с нашим шаблоном Redux+TS
# (использование инструмента "degit" для клонирования и извлечения шаблона)
npx degit reduxjs/redux-templates/packages/vite-template-redux my-app

# Next.js с использованием шаблона with-redux
npx create-next-app --example with-redux my-app
```

В настоящее время у нас нет официальных шаблонов React Native, но мы рекомендуем эти шаблоны для стандартного React Native и Expo:

- <https://github.com/rahsheen/react-native-template-redux-typescript>
- <https://github.com/rahsheen/expo-template-redux-typescript>

### An Existing App

Redux Toolkit доступен в виде пакета в NPM для использования с сборщиком модулей или в приложении Node:

```bash
npm install @reduxjs/toolkit
```

Если вам нужна привязка Redux к React установите:

```bash
npm install react-redux
```

Пакет включает предварительно скомпилированную сборку ESM, которую можно использовать как тег `<script type="module">` непосредственно в браузере.

## Что включено

Redux Toolkit включает эти API:

- [`configureStore()`](<../04. API Reference/01. НАСТРОЙКА STORE/configureStore.md>): обертывает `createStore`, чтобы предоставить упрощенные параметры конфигурации и значения по умолчанию. Он может автоматически комбинировать ваши slice reducers, добавлять любые middleware Redux, которые вы загрузите, по умолчанию включает `redux-thunk` и позволяет использовать расширение Redux DevTools Extension.

- [`createReducer()`](<../04. API Reference/02. REDUCERS AND ACTIONS/createReducer.md>): это позволяет вам создать таблицу поиска action.type для функций reducer вместо написания операторов switch. Кроме того, он автоматически использует библиотеку immer, чтобы вы могли писать более простые неизменяемые обновления с обычным изменяющим кодом, например `state.todos[3].completed = true.`

- [`createAction()`](<../04. API Reference/02. REDUCERS AND ACTIONS/createAction.md>): генерирует функцию action creator для заданной строки action.type

- [`createSlice():`]: принимает объект функций reducer, имя slice и значение начального состояния и автоматически генерирует reducer slice с соответствующими action creators и action types.

- [`combineSlices()`](<../04. API Reference/02. REDUCERS AND ACTIONS/combineSlices.md>): объединяет несколько slices в один reducer и позволяет «ленивую загрузку» slices после инициализации.

- [`createAsyncThunk`](<../04. API Reference/02. REDUCERS AND ACTIONS/createAsyncThunk.md>): принимает строку action type и функцию, которая возвращает promise, и генерирует преобразователь thunk, который отправляет `pending/fulfilled/rejected` action types на основе этого promise.

- [`createEntityAdapter`](<../04. API Reference/02. REDUCERS AND ACTIONS/createEntityAdapter.md>): генерирует набор повторно используемых reducers и selectors для управления нормализованными данными в хранилище

- [`createSelector`](<../04. API Reference/03. ПРОЧЕЕ/createSelector.md>): утилита из библиотеки Reselect, повторно экспортированная для простоты использования.

## RTK Query

[RTK Query](<../05. RTK QUERY/01. Обзор RTK Query.md>) предоставляется как дополнение в пакете `@reduxjs/toolkit`. Он специально создан для решения задач по выборке и кэшированию данных и предоставляет компактный, но мощный набор инструментов для определения уровня интерфейса API для вашего приложения. Он предназначен для упрощения обычных случаев загрузки данных в веб-приложение, устраняя необходимость самостоятельно писать логику выборки и кэширования данных.

RTK Query построен на основе ядра Redux Toolkit для своей реализации, используя внутренний [Redux](https://redux.js.org/) для своей архитектуры. Хотя знание Redux и RTK не требуется для использования RTK Query, вам следует изучить все дополнительные возможности глобального управления store, которые они предоставляют, а также установить расширение браузера [Redux DevTools](https://github.com/reduxjs/redux-devtools), который безупречно работает с RTK Query для перемещения и воспроизведения временной шкалы вашего запроса и поведения кэша.

RTK Query включен в установку основного пакета Redux Toolkit. Он доступен через любую из двух точек входа ниже:

```tsx
import { createApi } from '@reduxjs/toolkit/query';

/* Точка входа, специфичная для React, которая автоматически генерирует
  хуки, соответствующие определенным конечным точкам */
import { createApi } from '@reduxjs/toolkit/query/react';
```


